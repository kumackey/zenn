---
title: "ã€Gitã€‘git restoreã‚’ç”¨ã„ã¦ã€ãƒ–ãƒ©ãƒ³ãƒä¸Šã®å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ãƒ–ãƒ©ãƒ³ãƒã«æŒã£ã¦ãã‚‹"
emoji: "ğŸ”„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Git"]
published: true
---

# ãƒã‚¤ãƒ³ãƒˆãƒ»çµè«–

`branch_a`ã«ã‚ã‚‹å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ãƒ–ãƒ©ãƒ³ãƒã«ã¾ã¨ã‚ã¦æŒã£ã¦ã„ããŸã„å ´åˆã€ä»–ãƒ–ãƒ©ãƒ³ãƒã§ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¤ã€‚

```shell
git restore --source=branch_a .
```

éƒ¨åˆ†çš„ã«æŒã£ã¦ããŸã„å ´åˆã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹ã¨ä¾¿åˆ©ã€‚

```shell
$ git diff main..branch_a --name-only
```

# ãªãœ`git restore`ã‚’ä½¿ã†ã®ã‹ï¼Ÿ

~~ãªã‚“ã‹ä½¿ãˆã‚‹ã¨ã‚«ãƒƒã‚³ã‚ˆããªã„ï¼Ÿ~~
ã‚‚ã¡ã‚ã‚“`git checkout`ã§ã‚‚åŒã˜æ©Ÿèƒ½ã¯å®Ÿç¾ã§ãã¾ã™ã€‚
ãŸã ã€`git checkout`ã¯è²¬å‹™ãŒåºƒãã€ãƒ–ãƒ©ãƒ³ãƒã®åˆ‡ã‚Šæ›¿ãˆãªã©ã§ã‚‚ä½¿ç”¨ã—ã¾ã™ã€‚
ãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ã¯`git switch`, ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ãƒ»å¾©æ—§ã«ã¯`git restore`ã¨ä½¿ã„åˆ†ã‘ãŸæ–¹ãŒã€è²¬å‹™ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

# ä¾‹ã‚’ã‚ã’ãªãŒã‚‰ã®èª¬æ˜

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
â””â”€â”€ GitWorkTreeFromOtherBranch
    â”œâ”€â”€ 1.txt
    â”œâ”€â”€ 2.txt
    â”œâ”€â”€ 3.txt
    â”œâ”€â”€ 4.txt
    â””â”€â”€ 5.txt
```

## æº–å‚™

`main`ã‹ã‚‰åˆ‡ã‚Šæ›¿ãˆã¦`branch_a`ã‚’ä½œã‚Šã¾ã™ã€‚

```shell
$ git branch                   
* main

$ git switch -c branch_a
Switched to a new branch 'branch_a'
```

å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šcommitã—ã¾ã™ã€‚

```shell
$ for i in 1 2 3 4 5
for> do
for> echo $i >> GitWorkTreeFromOtherBranch/$i.txt
for> done

$ ls GitWorkTreeFromOtherBranch 
1.txt                   3.txt                   5.txt
2.txt                   4.txt

$ git add .
$ git commit -m 'create 1-5 text'
[branch_a fdafbec] create 1-5 text
 5 files changed, 5 insertions(+)
 create mode 100644 GitWorkTreeFromOtherBranch/1.txt
 create mode 100644 GitWorkTreeFromOtherBranch/2.txt
 create mode 100644 GitWorkTreeFromOtherBranch/3.txt
 create mode 100644 GitWorkTreeFromOtherBranch/4.txt
 create mode 100644 GitWorkTreeFromOtherBranch/5.txt
```

`main`ã‹ã‚‰`branch_b`ã‚’ä½œã‚Šã¾ã™ã€‚

```shell
$ git switch main
Switched to branch 'main'

$ git switch -c branch_b
Switched to a new branch 'branch_b'

$ git branch
  branch_a
* branch_b
  main

$ ls GitWorkTreeFromOtherBranch
$ git status                                                               
On branch branch_b
nothing to commit, working tree clean
```

## å…¨éƒ¨æŒã£ã¦ãã‚‹

`git restore`å¯¾è±¡ãƒ‘ã‚¹ã‚’ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‘ã‚¹(`.`)ã«æŒ‡å®šã™ã‚Œã°ã€å…¨éƒ¨æŒã£ã¦æ¥ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```shell
$ git restore --source=branch_a .
$ git status
On branch branch_b
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        GitWorkTreeFromOtherBranch/1.txt
        GitWorkTreeFromOtherBranch/2.txt
        GitWorkTreeFromOtherBranch/3.txt
        GitWorkTreeFromOtherBranch/4.txt
        GitWorkTreeFromOtherBranch/5.txt

nothing added to commit but untracked files present (use "git add" to track)

$ ls GitWorkTreeFromOtherBranch 
1.txt                   3.txt                   5.txt
2.txt                   4.txt
```

## éƒ¨åˆ†çš„ã«æŒã£ã¦ãã‚‹

`git diff`ã«`--name-only`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«å(Gitã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹)ã®ä¸€è¦§ã‚’ç¢ºèªã§ãã¾ã™ã€‚

```shell
$ git diff main..branch_a --name-only
GitWorkTreeFromOtherBranch/1.txt
GitWorkTreeFromOtherBranch/2.txt
GitWorkTreeFromOtherBranch/3.txt
GitWorkTreeFromOtherBranch/4.txt
GitWorkTreeFromOtherBranch/5.txt
```

æŒã£ã¦ããŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’`git restore`ã®å¯¾è±¡ãƒ‘ã‚¹ã«æŒ‡å®šã™ã‚Œã°OKã§ã™ã€‚

```shell
$ git restore --source=branch_a GitWorkTreeFromOtherBranch/1.txt GitWorkTreeFromOtherBranch/4.txt
$ git status
On branch branch_b
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        GitWorkTreeFromOtherBranch/1.txt
        GitWorkTreeFromOtherBranch/4.txt

nothing added to commit but untracked files present (use "git add" to track)

$ ls GitWorkTreeFromOtherBranch 
1.txt   4.txt
```

# å‚è€ƒ
[Git - git-restore Documentation](https://git-scm.com/docs/git-restore#Documentation/git-restore.txt---sourcelttreegt)