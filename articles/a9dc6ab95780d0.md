---
title: "ã€Goã€‘Developer eXperience Day 2021ã«ãŠã‘ã‚‹å’Œç”°ã•ã‚“ã®ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®è§£èª¬ã‚’Goã§å®Ÿè£…ã—ã¦ã¿ãŸ"
emoji: "ğŸ§ª"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢ 
topics: ["Go", "TDD"]
published: true
---

# å‹•ç”»ãƒªãƒ³ã‚¯

å‹‰å¼·ã«ãªã£ãŸã®ã§äººé¡è¦‹ã¾ã—ã‚‡ã†

[Developer eXperience Day ã€Stream Aã€‘ ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒç›®æŒ‡ã™ã‚‚ã®](https://youtu.be/AKCfYuDhvXM?t=3380)

# å®Ÿè£…

## productionã‚³ãƒ¼ãƒ‰

```go:int_closed_range.go
package main

import "strconv"

type IntClosedRange struct {
	lower int
	upper int
}

func (r IntClosedRange) Lower() int {
	return r.lower
}

func (r IntClosedRange) Upper() int {
	return r.upper
}

func (r IntClosedRange) Notation() string {
	// æ–‡å­—åˆ—ã¨æ•°å­—ã®çµåˆã¯goã§ã¯åœ°é“ãªæ–¹æ³•ã—ã‹ãªã‹ã£ãŸ
	return "[" + strconv.Itoa(r.lower) + "," + strconv.Itoa(r.upper) + "]"
}

func (r IntClosedRange) Includes(i int) bool {
	return r.lower <= i && i <= r.upper
}

```

## suiteã‚’ä½¿ã£ã¦çŠ¶æ³>æ©Ÿèƒ½ã¨ã„ã†éšå±¤æ•´ç†ã§æ›¸ã„ãŸ

ãŒã€æ•´ç†ãŒã¡ã‚‡ã£ã¨ååˆ†ã§ãªã„ãªã¨ã¯æ„Ÿã˜ã¦ã¾ã™ã€‚

```go:int_closed_range_test.go
package main

import (
	"github.com/stretchr/testify/suite"
	"testing"
)

type intClosedRangeSuite struct {
	suite.Suite
	icRange IntClosedRange
}

func (suite *intClosedRangeSuite) SetupSuite() {
	suite.icRange = IntClosedRange{3, 7}
}

func (suite *intClosedRangeSuite) Test_æ•´æ•°é–‰åŒºé–“ã¯ä¸‹ç«¯ç‚¹3ã‚’æŒã¤() {
	suite.Equal(3, suite.icRange.Lower())
}

func (suite *intClosedRangeSuite) Test_Upperãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸Šç«¯ç‚¹7ã‚’æŒã¤() {
	suite.Equal(7, suite.icRange.Upper())
}

func (suite *intClosedRangeSuite) Test_Notationãƒ¡ã‚½ãƒƒãƒ‰ã¯æ–‡å­—åˆ—è¡¨è¨˜ã‚’è¿”ã›ã‚‹() {
	suite.Equal("[3,7]", suite.icRange.Notation())
}

func (suite *intClosedRangeSuite) Test_Includesãƒ¡ã‚½ãƒƒãƒ‰ã¯æŒ‡å®šã—ãŸæ•´æ•°ã‚’å«ã‚€ã‹åˆ¤å®šã§ãã‚‹() {
	tests := map[string]struct {
		input    int
		includes bool
	}{
		"9ã¯å«ã¾ã‚Œãªã„":   {9, false},
		"5ã¯å«ã¾ã‚Œã‚‹":    {5, true},
		"1ã¯å«ã¾ã‚Œãªã„":   {1, false},
		"ä¸‹ç«¯ç‚¹3ã¯å«ã¾ã‚Œã‚‹": {3, true},
		"ä¸Šç«¯ç‚¹7ã¯å«ã¾ã‚Œã‚‹": {7, true},
	}

	for name, test := range tests {
		suite.Run(name, func() {
			suite.Equal(test.includes, suite.icRange.Includes(test.input))
		})
	}
}

func Test_æ•´æ•°é–‰åŒºé–“ã‚’è¡¨ã™(t *testing.T) {
	suite.Run(t, new(intClosedRangeSuite))
}

```

![suiteã‚’ä½¿ã£ã¦çŠ¶æ³>æ©Ÿèƒ½ã¨ã„ã†éšå±¤æ•´ç†ã§æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§](/images/a9dc6ab95780d0/image1.png)

## æ©Ÿèƒ½>çŠ¶æ³ã¨ã„ã†éšå±¤æ•´ç†ã§æ›¸ã„ãŸ

```go:int_closed_range_test.go
package main

import (
	"github.com/stretchr/testify/assert"
	"testing"
)

func Test_Lowerãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸‹ç«¯ç‚¹ã‚’è¿”ã›ã‚‹(t *testing.T) {
	icRange := IntClosedRange{3, 7}
	assert.Equal(t, 3, icRange.Lower())
}

func Test_Upperãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸Šç«¯ç‚¹ã‚’è¿”ã›ã‚‹(t *testing.T) {
	icRange := IntClosedRange{3, 7}
	assert.Equal(t, 7, icRange.Upper())
}

func Test_Notationãƒ¡ã‚½ãƒƒãƒ‰ã¯æ–‡å­—åˆ—è¡¨è¨˜ã‚’è¿”ã›ã‚‹(t *testing.T) {
	icRange := IntClosedRange{3, 7}
	assert.Equal(t, "[3,7]", icRange.Notation())
}

func Test_Includesãƒ¡ã‚½ãƒƒãƒ‰ã¯æŒ‡å®šã—ãŸæ•´æ•°ã‚’å«ã‚€ã‹åˆ¤å®šã§ãã‚‹(t *testing.T) {
	tests := map[string]struct {
		input    int
		includes bool
	}{
		"9ã¯å«ã¾ã‚Œãªã„":   {9, false},
		"5ã¯å«ã¾ã‚Œã‚‹":    {5, true},
		"1ã¯å«ã¾ã‚Œãªã„":   {1, false},
		"ä¸‹ç«¯ç‚¹3ã¯å«ã¾ã‚Œã‚‹": {3, true},
		"ä¸Šç«¯ç‚¹7ã¯å«ã¾ã‚Œã‚‹": {7, true},
	}

	icRange := IntClosedRange{3, 7}

	for name, test := range tests {
		t.Run(name, func(t *testing.T) {
			assert.Equal(t, test.includes, icRange.Includes(test.input))
		})
	}
}

```

![æ©Ÿèƒ½>çŠ¶æ³ã¨ã„ã†éšå±¤æ•´ç†ã§æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§](/images/a9dc6ab95780d0/image2.png)

# å‹‰å¼·ã«ãªã£ãŸã“ã¨ãƒ»æ°—ä»˜ã

- Goã‚‚æ—¥æœ¬èªãƒ¡ã‚½ãƒƒãƒ‰ãŒä½¿ãˆã‚‹
- suiteãŒã‚ã‚‹ã“ã¨ã‚’åˆã‚ã¦çŸ¥ã£ãŸ
- ãŒã€æ›¸ãæ–¹ãŒæ™®æ®µã®ãƒ†ã‚¹ãƒˆã¨é•ã†ã®ã§ã¡ã‚‡ã£ã¨æ‰±ã„ã¥ã‚‰ã„ã‹ã‚‚
- Goã¯table driven testãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã†ã„ã†æ„å‘³ã§ã‚‚æ©Ÿèƒ½>çŠ¶æ³ã¨ã„ã†éšå±¤æ•´ç†ãŒåˆã„ãã†

# å®Ÿè£…ã—ãŸãƒªãƒã‚¸ãƒˆãƒª

[kumackey/eXperienceDayGo](https://github.com/kumackey/eXperienceDayGo)